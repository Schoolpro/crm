<%- include('partials/head') %>
<%- include('partials/header') %>

<div class="container mt-4 user-detail-container">
  <% if (user) { %>
    <div class="user-detail-card shadow-sm rounded p-4 bg-white">
      <div class="row align-items-center">
        <div class="col-md-3 text-center">
          <img src="/uploads/profile-pics/<%= user.profile_picture_filename || 'default.jpg' %>" alt="Profile picture" class="img-fluid rounded-circle user-profile-pic mb-3">
          <h3 class="mt-2"><%= user.username %></h3>
          <p class="text-muted"><%= user.title %></p>
        </div>

        <div class="col-md-9">
          <div class="row mb-3">
            <div class="col-sm-4"><strong>Email:</strong></div>
            <div class="col-sm-8"><%= user.email %></div>
          </div>
          <div class="row mb-3">
            <div class="col-sm-4"><strong>Phone:</strong></div>
            <div class="col-sm-8"><%= user.phone %></div>
          </div>
        </div>
      </div>

      <hr>

      <h4 class="mt-4">🗂 Companies Assigned</h4>
      <% if (assignedCompanies.length === 0) { %>
        <p class="text-muted">This user has no assigned companies yet.</p>
      <% } else { %>
        <ul class="list-group">
          <% assignedCompanies.forEach(c => { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <a href="/organizations/<%= c.id %>"><%= c.name %></a>
              <small class="text-muted"><%= c.phone %></small>
            </li>
          <% }) %>
        </ul>
      <% } %>
    </div>
  <% } else { %>
    <div class="alert alert-danger" role="alert">
      ⚠️ The user you are looking for was not found.
    </div>
  <% } %>
</div>

<%- include('partials/footer') %>
